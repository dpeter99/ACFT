<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tile Entities </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Tile Entities ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../toc.html">
    <meta property="docfx:tocrel" content="../../toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../index.html">
                <img id="logo" class="svg" src="../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="tile-entities">Tile Entities</h1>

<p>Tile entities are a complex topic. But at the core they are blocks witch have more complex data in them, or business logic. They are used for chest and machines.
Tile entities add to the base block, meaning for example a machine would have 2 classes a <code>MyMachineBlock</code> inheriting form <code>Block</code> and a <code>MyMachineTileEntity</code> inheriting from <code>TileEntity</code>. To link the two classes together we need to make a instance of the tile entity when the block is placed.</p>
<h2 id="creation">Creation</h2>
<h3 id="step-1-creating-the-class">Step 1. Creating the class</h3>
<p>To make a Tile Entity you need to create a class that inherits form <code>TileEntity</code> so something like this:</p>
<pre><code class="lang-java">public class MyMachineTileEntity extends TileEntity{
    
    public MyMachineTileEntity() {
        super(ArcaneTileEntities.witch_altar);
    }
}
</code></pre>
<p>Now we just need to register it</p>
<h3 id="step-2-registration">Step 2. Registration</h3>
<p>You register your block class that we will be using for this Tile Entity like usual, so for that take a look here <a href="../blocks.html#registering">Block registration</a></p>
<p>To register your Tile Entity class you need to use the register callback function for the tile entity registry event:</p>
<pre><code class="lang-java">@SubscribeEvent
public static void onTileRegistry(final RegistryEvent.Register&lt;TileEntityType&lt;?&gt;&gt; itemRegistryEvent){
    //Get the registry form the event data
    IForgeRegistry&lt;TileEntityType&lt;?&gt;&gt; reg = itemRegistryEvent.getRegistry();

    reg.register(TileEntityType.Builder.create(MyMachineTileEntity::new, MyBlocks.my_machine).build(null).setRegistryName(&quot;my_machine&quot;));
}
</code></pre>
<p>Here you can see we make the usual function with the <code>@SubscribeEvent</code> annotation. And we get the registry out of the parameters. Than we call the register function but this time we can't just pass in a instance of the tile entity. We need to use a Type builder, it needs as input out Tile Entity, and the block it is connected to. To get our block we use an (ObjectHolder)[../../objectHolders.md] class. We also set the registry name of the tile entity, it can be the same as the blocks (and should be for ease of understanding) as they are in separate registries (Block is in the blocks list, Tile Entity is in the tile entity list).</p>
<h3 id="step-3-creating-the-tile-entity-when-placing-the-block">Step 3. Creating the tile entity when placing the block</h3>
<p>In the block we need to create an instance of the <code>MyMachineTileEntity</code> and place it in the correct position so we need to add the following code:</p>
<pre><code class="lang-java">//Telling MC that we do have TE
@Override
public boolean hasTileEntity(BlockState state) {
    return true;
}

@Nullable
@Override
public TileEntity createTileEntity(BlockState state, IBlockReader world) {
    return new WitchAltarTileEntity();
}
</code></pre>
<h2 id="storing-data">Storing data</h2>
<p>To store data you first make a normal java field</p>
<pre><code class="lang-java">int my_value = 0;
</code></pre>
<p>Than to save it to disk and back (or when the nbt is read) use the <code>read(CompoundNBT nbt)</code> and <code>CompoundNBT write(CompoundNBT nbt)</code> functions like this:</p>
<pre><code class="lang-java"> @Override
public void read(CompoundNBT nbt) {
    my_value = nbt.getInt(&quot;my_value&quot;);
    super.read(nbt);
}

@Override
public CompoundNBT write(CompoundNBT nbt) {
    nbt.putInt(&quot;my_value&quot;, my_value);
    return super.write(nbt);
}
</code></pre>
<p>Than to sync the data between the server and the client and to access it in the Containers we make a IntArray witch is magically synced.</p>
<pre><code class="lang-java">protected final IIntArray my_machine_data = new IIntArray() {
    public int get(int index) {
        switch (index) {
            case 0:
                return my_value;
            default:
                return 0;
        }
    }

    public void set(int index, int value) {
        switch (index) {
            case 0:
                my_value = value;
            default:
        }

    }

    public int size() {
        return 1;
    }
};
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/dpeter99/ACFT/blob/master/articles/blocks/tile_entities/tileEntities.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../styles/main.js"></script>
  </body>
</html>
